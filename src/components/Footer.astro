---
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import Hr from "./Hr.astro";
import Socials from "./Socials.astro";

const currentYear = new Date().getFullYear();

export interface Props {
  noMarginTop?: boolean;
}

const { noMarginTop = false } = Astro.props;
const locale = getLangFromUrl(Astro.url);
const localeString = useTranslations(locale);
const license = "CC BY-NC-SA 4.0";
---

<footer class:list={["w-full", { "mt-auto": !noMarginTop }]}>
  <Hr noPadding />
  <div
    class="flex flex-col justify-between items-center py-6 sm:flex-row-reverse sm:py-4"
  >
    <Socials centered />
    <div class="flex flex-col items-center my-2 whitespace-nowrap sm:flex-row">
      <span>
        {
          localeString("footer.copyright", {
            year: currentYear.toString(),
            author: localeString("site.author"),
          })
        }
      </span>
      <span class="hidden sm:inline">&nbsp;|&nbsp;</span>
      <span>
        {localeString("footer.license", { license })}
      </span>
    </div>
  </div>
</footer>
