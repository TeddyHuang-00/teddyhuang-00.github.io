---
import { Icon } from "astro-icon/components";

const BadgeTypes = ["tip", "info", "important", "caution", "danger"] as const;
type BadgeType = (typeof BadgeTypes)[number];

export interface Props {
  text: string;
  type?: BadgeType;
  class?: string;
}

const { type = "tip", text, class: className = "" } = Astro.props;

if (!BadgeTypes.includes(type)) {
  throw new Error(`Invalid badge type: ${type}`);
}

const typeConfig: Record<BadgeType, { icon: string; color: string }> = {
  tip: {
    icon: "tabler:bulb",
    color:
      "text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",
  },
  info: {
    icon: "tabler:info-circle",
    color:
      "text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300",
  },
  important: {
    icon: "tabler:exclamation-circle",
    color:
      "text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",
  },
  caution: {
    icon: "tabler:alert-triangle",
    color:
      "text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300",
  },
  danger: {
    icon: "tabler:alert-octagon",
    color:
      "text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",
  },
};
---

<span
  class:list={[
    "inline-flex items-center cursor-help transition-colors duration-200",
    typeConfig[type].color,
    className,
  ]}
  title={text}
>
  <Icon name={typeConfig[type].icon} class="size-4" />
</span>
