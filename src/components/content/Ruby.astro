---
export interface Props {
  rb: string;
  rt: string;
  split?: string;
}

const { rb, rt, split = " " } = Astro.props;

const rbs = rb.split(split);
const rts = rt.split(split);

if (rbs.length !== rts.length) {
  const length = Math.max(rbs.length, rts.length);
  const matched = Array.from({ length }).map((_, i) => {
    return `${rbs[i] ?? "???"} (${rts[i] ?? "???"})`;
  });
  throw new Error(
    "The number of rb and rt must be the same. Current have: " +
      matched.join(", ")
  );
}
const pairs = rbs.map((rb, i) => ({ rb, rt: rts[i] }));
const innerHtml = pairs
  .map(({ rb, rt }) => `<rb>${rb}<rp>(<rt>${rt}<rp>)`)
  .join("");
---

<>
  <ruby class="inline text-inherit">
    <Fragment set:html={innerHtml} />
  </ruby>
</>

<style is:global>
  ruby > rt {
    font-size: 100%;
    zoom: 0.75;
  }
  ruby {
    ruby-align: center;
  }
</style>
